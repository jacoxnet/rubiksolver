{% extends 'apprsolve/base.html' %}
{% load static %}

{% block title %}
Rubik's Cube Solver
{% endblock %}

{% block body %}

    <div id='cubefield' class='container'>
        <div class='row h-100 justify-content-center'>
            <div class='col-12'>
                <div class="scene" id="scene">
                    <div class="pivot centered" id="pivot" style="transform: rotateX(-35deg) rotateY(-45deg);">
                        <div class="cube" id="cube">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class='container'>
        <div class='row justify-content-center'>
            <div id='saverestore' class='col-12 text-center'>
                <button class="btn btn-primary" type="button" onclick='exportCube()'>Save Cube</button>
                <button class="btn btn-warning" type="button" onclick='importCube()'>Restore Cube</button>
                <button class="btn btn-secondary" type="button" onclick='getCabezas()'>Get Cabezas Spec</button>
                <button class="btn btn-warning" type="button" onclick='randomizeCube()'>Randomize</button>
                
            </div>
        </div>
    </div>


    
<script> 

    // retrieves cube stored in server and calls putCubeSpec
    async function importCube() {
        const formData = new FormData();
        formData.append('csrfmiddlewaretoken', '{{ csrf_token }}');
        const response = await fetch('{% url "restore" %}', {
            method: 'POST',
            body: formData
        });
        const data = await response.json();
        console.log('Success77:', data);
        putCubeSpec(data.cubed);
    }
    
    // calls getCubeSpec and sends data to server
    async function exportCube() {
        const cubed = getCubeSpec();
        const formData = new FormData();
        formData.append('cubed', JSON.stringify(cubed));
        formData.append('csrfmiddlewaretoken', '{{ csrf_token }}');
        const response = await fetch('{% url "info" %}', {
            method: 'POST',
            body: formData
        });
        const data = await response.json();
        console.log('Success:', data);
    }

</script>


{% endblock %}